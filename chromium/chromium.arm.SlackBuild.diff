23a24,25
> # Modified by Martin Östman (Minime) for slackware ARM (SARPI).
> #
26c28
< # Slackware SlackBuild script 
---
> # Slackware SlackBuild script
28a31
> # Modified by      Martin Östman (Minime) <slackware[at]slackwarelinux[dot]se>
35a39
> #                    or llvm/clang 13 >=;
40,405c44,45
< # Needs:       
< # Changelog:   
< # 31.0.1650.57-1:  18/nov/2013 by Eric Hameleers <alien@slackware.com>
< #                  * Initial build.
< # 31.0.1650.63-1:  18/Nov/2013 by Eric Hameleers <alien@slackware.com>
< # 31.0.1650.67-1:  19/dec/2013 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with several security fixes.
< # 32.0.1700.77-1:  14/jan/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with several security fixes.
< # 32.0.1700.102-1: 29/jan/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with several security fixes.
< # 32.0.1700.107-1: 04/feb/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 33.0.1750.117-1: 21/feb/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with several security fixes.
< # 33.0.1750.146-1: 04/mar/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with several security fixes.
< # 33.0.1750.149-1: 11/mar/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with several security fixes.
< # 33.0.1750.152-1: 18/mar/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with several security fixes.
< # 34.0.1847.116-1: 09/apr/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with several security fixes.
< # 34.0.1847.132-1: 25/apr/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 34.0.1847.137-1: 14/may/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 35.0.1916.114-1: 20/may/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with several security fixes.
< # 35.0.1916.153-1: 10/jun/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with several security fixes.
< # 36.0.1985.125-1: 16/jun/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with several security fixes.
< #                    We can no longer download toolchain binaries in advance,
< #                    so the build will now require internet connectivity.
< # 36.0.1985.143-1: 12/aug/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with security fixes, Chrome also comes with an
< #                    updated Flash plugin: 14.0.0.177.
< # 37.0.2062.94-1:  27/aug/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with security fixes.
< #                    New: an embedded PDF viewer.
< # 37.0.2062.120-1: 09/sep/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with security fixes, Chrome also comes with an
< #                    updated Flash plugin: 15.0.0.152.
< # 38.0.2125.101-1: 08/oct/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with security fixes.
< # 38.0.2125.104-1: 18/oct/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with security fixes. Chrome also updates its
< #                    Flash plugin to 15.0.0.189.
< # 38.0.2125.111-1: 28/oct/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 38.0.2125.122-1: 11/nov/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with security fixes. Chrome also updates its
< #                    Flash plugin to 15.0.0.223.
< # 39.0.2171.65-1:  17/nov/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with security fixes.  See
< #                    http://googlechromereleases.blogspot.nl/2014/11/stable-channel-update_18.html
< # 39.0.2171.71-1:  26/nov/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with security fixes. Chrome also updates its
< #                    Flash plugin to 15.0.0.239.
< # 39.0.2171.95-1:  09/dec/2014 by Eric Hameleers <alien@slackware.com>
< #                  * Update comes with security fixes. Chrome also updates its
< #                    Flash plugin to 16.0.0.235.
< # 39.0.2171.95-2:  01/jan/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Add support for the WIdevine CDM plugin (i.e. Netflix playback)
< # 39.0.2171.99-1:  14/jan/2015 by Eric Hameleers <alien@slackware.com>
< #                  * New release accompanied by pepperflash 16.0.0.257. 
< # 40.0.2214.91-1:  21/jan/2015 by Eric Hameleers <alien@slackware.com>
< #                  * New release.
< # 40.0.2214.111-1: 06/feb/2015 by Eric Hameleers <alien@slackware.com>
< #                  * New release.
< # 41.0.2272.76-1:  05/mar/2015 by Eric Hameleers <alien@slackware.com>
< #                  * First release of Chromium 41 stable.
< # 41.0.2272.118-1: 02/apr/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 42.0.2311.90-1:  15/apr/2015 by Eric Hameleers <alien@slackware.com>
< #                  * First release of Chromium 42 stable.
< # 42.0.2311.135-1: 30/apr/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 43.0.2357.65-1:  20/may/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Security update, first 43 version.
< # 43.0.2357.81-1:  29/may/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 43.0.2357.124-1: 09/jun/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 43.0.2357.125-1: 12/jun/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 43.0.2357.125-2: 19/jun/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Disable "OK Google" hotwording completely.
< # 43.0.2357.130-1: 22/jun/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 43.0.2357.130-2: 25/jun/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Fix broken password manager in KDE.
< # 43.0.2357.132-1: 08/jul/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 43.0.2357.134-1: 15/jul/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 44.0.2403.89-1:  22/jul/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Update - first 44 release.
< # 44.0.2403.107-1: 25/jul/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Update - emergency bugfix release.
< # 44.0.2403.155-1: 11/aug/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 44.0.2403.157-1: 21/aug/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 45.0.2454.85-1:  02/sep/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Update - first 45 release.
< # 45.0.2454.93-1:  16/sep/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 45.0.2454.101-1: 25/sep/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 46.0.2490.71-1:  14/oct/2015 by Eric Hameleers <alien@slackware.com>
< #                  * First 46 release.
< # 46.0.2490.86-1:  22/nov/2015 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 47.0.2526.73-1:  03/dec/2015 by Eric Hameleers <alien@slackware.com>
< #                  * First 47 release.
< # 48.0.2564.82-1:  24/jan/2016 by Eric Hameleers <alien@slackware.com>
< #                  * First 48 release.
< # 48.0.2564.97-1:  31/jan/2016 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 48.0.2564.109-1: 13/feb/2016 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 49.0.2623.75-1:  05/mar/2016 by Eric Hameleers <alien@slackware.com>
< #                  * First 49 release.  Binary plugins such as widevine and
< #                    pepperflash are no longer available for 32-bit since
< #                    Google stopped providing binaries for 32-bit Chrome.
< # 49.0.2623.108-1: 25/feb/2016 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 49.0.2623.112-1: 08/apr/2016 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 50.0.2661.75-1:  14/apr/2016 by Eric Hameleers <alien@slackware.com>
< #                  * First 50 release.
< # 50.0.2661.94-1:  29/apr/2016 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 50.0.2661.102-1: 12/may/2016 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 51.0.2704.63-1:  26/may/2016 by Eric Hameleers <alien@slackware.com>
< #                  * First 51 release.
< # 51.0.2704.84-1:  07/jun/2016 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 51.0.2704.103-1: 17/jun/2016 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 52.0.2743.82-1:  24/jul/2016 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 52.0.2743.116-1: 04/aug/2016 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 53.0.2785.92-1:  06/sep/2016 by Eric Hameleers <alien@slackware.com>
< #                  * First 53 release.
< # 53.0.2785.92-2:  12/sep/2016 by Eric Hameleers <alien@slackware.com>
< #                  * Apply patch required for Slackware 14.1.
< # 54.0.2840.90-1:  03/nov/2016 by Eric Hameleers <alien@slackware.com>
< #                  * First 54 release. Build system changed from gyp to gn.
< # 54.0.2840.100-1: 17/nov/2016 by Eric Hameleers <alien@slackware.com>
< #                  * Updated. Security fix. Removed the VAAPI patch because
< #                    several people have issues with it.
< # 55.0.2883.75-1:  12/dec/2016 by Eric Hameleers <alien@slackware.com>
< #                  * First 55 release.
< # 56.0.2924.76-1:  30/jan/2017 by Eric Hameleers <alien@slackware.com>
< #                  * First 56 release.
< # 56.0.2924.76-2:  25/feb/2017 by Eric Hameleers <alien@slackware.com>
< #                  * Built for Slackware 14.1 with some additional patches.
< # 57.0.2987.98-1:  14/mar/2017 by Eric Hameleers <alien@slackware.com>
< #                  * First 57 release.
< # 58.0.3029.96-1:  04/may/2017 by Eric Hameleers <alien@slackware.com>
< #                  * Update to 58.
< # 59.0.3071.86-1:  06/jun/2017 by Eric Hameleers <alien@slackware.com>
< #                  * Update to 59.
< # 60.0.3112.78-1:  25/jun/2017 by Eric Hameleers <alien@slackware.com>
< #                  * Update to 60.
< # 61.0.3163.79-1:  11/sep/2017 by Eric Hameleers <alien@slackware.com>
< #                  * Update to 61.
< # 61.0.3163.100-1: 25/sep/2017 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 62.0.3202.62-1:  18/oct/2017 by Eric Hameleers <alien@slackware.com>
< #                  * Update to 62.
< # 62.0.3202.75-1:  27/oct/2017 by Eric Hameleers <alien@slackware.com>
< #                  * Update, switch compiler to clang instead of gcc.
< # 62.0.3202.94-1:  25/nov/2017 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 63.0.3239.108-1: 17/dec/2017 by Eric Hameleers <alien@slackware.com>
< #                  * Update to 63.
< # 63.0.3239.132-1: 07/jan/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 64.0.3282.119-1: 26/jan/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update to 64.
< # 64.0.3282.119-2: 29/jan/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Enable HEVC support.
< # 64.0.3282.140-1: 05/feb/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 64.0.3282.186-1: 06/mar/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 65.0.3325.146-1: 09/mar/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M65.
< # 65.0.3325.162-1: 16/mar/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 65.0.3325.181-1: 31/mar/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 66.0.3359.117-1: 25/apr/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M66.
< # 66.0.3359.139-1: 25/apr/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Security update (CVE-2018-6118).
< # 66.0.3359.181-1: 18/may/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 67.0.3396.62-1:  31/may/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M67.
< # 67.0.3396.79-1:  08/jun/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 67.0.3396.99-1:  02/jul/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 68.0.3440.84-1:  01/aug/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update to 68.
< # 69.0.3497.81-1:  05/sep/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update to 69.
< # 69.0.3497.100-1: 28/sep/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update, trying to fix pulseaudio.
< # 70.0.3538.67-1:  24/oct/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update to 70.
< # 70.0.3538.102-1: 11/nov/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 71.0.3578.80-1:  05/dec/2018 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M71.
< # 72.0.3626.81-1:  31/jan/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M72.
< # 72.0.3626.121-1: 03/mar/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update to 72.0.3626.121.
< # 73.0.3683.75-1:  15/mar/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M73.
< # 73.0.3683.75-2:  17/mar/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Fix 32bit build.
< # 73.0.3683.86-1:  31/mar/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 73.0.3683.103-1: 14/apr/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 74.0.3729.108-1: 24/apr/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M74.
< # 74.0.3729.169-1: 22/may/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 75.0.3770.80-1:  08/jun/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M75.
< # 75.0.3770.90-1:  13/jun/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 75.0.3770.100-1: 20/jun/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 75.0.3770.100-2: 20/jun/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Fix HEVC support.
< # 75.0.3770.142-1: 15/jul/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 76.0.3809.87-1:  31/jul/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M76.
< # 76.0.3809.132-1: 30/aug/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 77.0.3865.75-1:  11/sep/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M77.
< # 77.0.3865.90-1:  11/sep/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 77.0.3865.120-1: 10/oct/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 78.0.3904.70-1:  10/oct/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M78.
< # 78.0.3904.87-1:  01/nov/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Critical security update.
< # 78.0.3904.97-1:  11/nov/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 78.0.3904.108-1: 19/nov/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 79.0.3945.79-1:  11/dec/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 79.0.3945.88-1:  18/dec/2019 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 79.0.3945.117-1: 08/jan/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 79.0.3945.130-1: 19/jan/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Security update.
< # 80.0.3987.87-1:  05/feb/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M80.
< # 80.0.3987.106-1: 14/feb/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 80.0.3987.122-1: 27/feb/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 80.0.3987.132-1: 04/mar/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 80.0.3987.149-1: 18/mar/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 81.0.4044.92-1:  08/apr/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M81.
< # 81.0.4044.113-1: 16/apr/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 81.0.4044.122-1: 25/apr/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 81.0.4044.129-1: 29/apr/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 81.0.4044.138-1: 06/may/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 83.0.4103.61-1:  20/may/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M83.
< # 83.0.4103.97-1:  07/jun/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 83.0.4103.106-1: 16/jun/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 83.0.4103.116-1: 23/jun/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< #                    Add support for VAAPI. This is off by default but
< #                    can be enabled by adding '--ignore-gpu-blacklist' and
< #                    then one of '--use-gl=desktop' or '--use-gl=egl'.
< #                    See https://chromium.googlesource.com/chromium/src/+/master/docs/gpu/vaapi.md#VaAPI-on-Linux
< #                    for the intended usage (Intel VAAPI and MESA VAAPI).
< #                    To support Nvidia and other GPUs, patches would be needed.
< # 84.0.4147.89-1:  20/jul/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M84.
< # 84.0.4147.94-1:  23/jul/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated. Use a newer nodejs to make the sources compile
< #                    on 32bit Slackware 14, plus this also fixes the
< #                    broken development tools.
< # 84.0.4147.105-1: 01/aug/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 85.0.4183.83-1:  28/aug/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M85.
< # 85.0.4183.102-1: 09/sep/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 85.0.4183.121-1: 22/sep/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 86.0.4240.75-1:  07/oct/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M86.
< # 86.0.4240.111-1: 22/oct/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 86.0.4240.183-1: 03/nov/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 86.0.4240.198-1: 13/nov/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 87.0.4280.66-1:  23/nov/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M87.
< # 87.0.4280.88-1:  03/dec/2020 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 87.0.4280.141-1: 07/jan/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 88.0.4324.96-1:  21/jan/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M88.
< # 88.0.4324.146-1: 04/feb/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 88.0.4324.150-1: 06/feb/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 88.0.4324.182-1: 17/feb/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 88.0.4324.190-1: 23/feb/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 89.0.4389.72-1:  03/mar/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M89.
< # 89.0.4389.82-1:  07/mar/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 89.0.4389.90-1:  13/mar/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 89.0.4389.114-1: 31/mar/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 89.0.4389.128-1: 14/apr/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 90.0.4430.72-1:  15/apr/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Update to M90.
< # 90.0.4430.93-1:  28/apr/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 90.0.4430.212-1: 11/may/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Updated.
< # 91.0.4472.101-1: 11/jun/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
< # 91.0.4472.114-1: 19/jun/2021 by Eric Hameleers <alien@slackware.com>
< #                  * Update.
---
> # Needs:
> # Changelog:
411a52,68
> #                  30/aug/2021 by Minime <slackware[at]slackwarelinux[dot]se>
> #                  * Added lates patchset "92.0.4515.x"
> #                  * Repatched clang.toolchains.arm_i586.triple for ARM.
> #                  * Fixed chromium_conf for ARM
> #                  * Fixed target triple for arm.
> #                  * Fixed ARM sysroot path to libsqlite3.so, glibconfig.h,
> #                    dbus-arch-deps.h, graphene-config.h and incorrect
> #                    conf file "(arch)-linux-gnu.conf" in ARM system.
> #                  * Fixed compiling google's internal clang for ARM.
> #                  31/aug/2021 by Minime <slackware[at]slackwarelinux[dot]se>
> #                  * Fixed missing link to debias readelf for ARM.
> #                  2/sep/2021 by Minime <slackware[at]slackwarelinux[dot]se>
> #                  * Alienbob thought the code is messy, and i agree.
> #                    Started on some code cleanup.
> #                  * Removed eu-strip patch and rebuild of eu-strip as this
> #                    not needed.
> #                  * Cleaned up duplicate entries in chromium config array.
417c74,96
< # 
---
> # 93.0.4577.82-1:  20/sep/2021 by Minime <slackware[at]slackwarelinux[dot]se>
> #                  * Update to M93.
> #                  * Added latest patchsets for chromium-93.0.4577.8
> #                  * Fixed incorrect/missing softlink
> #                  * Added softlink cleanup
> #                  * Fixed Widevine support patch for ARM
> #                    https://www.linuxquestions.org/questions/slackware-arm-108/how-to-get-widevine-4-10-2252-0-working-on-slackware-arm-4175700846/
> #                  22/sep/2021 by Minime <slackware[at]slackwarelinux[dot]se>
> #                  * Fixed custom clang option, set default
> #                    to systems clang version
> #                  27/sep/2021 by Minime <slackware[at]slackwarelinux[dot]se>
> #                  * Merged script with AlienBOB´s slackbuild
> #                  * Fixed and adjusted script to my llvm build.
> #                  * Note: There will be an issue with Slackware ARMs
> #                          llvm/clang version as its missing lld.
> #                          This is one reason i make a custom llvm/clang package.
> #                  * cleared changelog history as its kind of irrelevant and old...
> # 94.0.4606.81-1:  12/oct/2021 by Minime <slackware[at]slackwarelinux[dot]se>
> #                  * Update to M94.
> #                  * Needs llvm/clang 13, so system clang is no longer an option.
> #                  * Will build with python 3.9, but if upgraded to python 3.10
> #                    there will be issues. Need to revert package python 3.10 to 3.9. 
> #
419c98
< # 
---
> #
421c100
< # 
---
> #
424c103
< # Install it using 'installpkg'. 
---
> # Install it using 'installpkg'.
441,442c120,121
< VERSION=${VERSION:-93.0.4577.82}
< UNGOOGLED=${UNGOOGLED:-92.0.4515.159-1}
---
> VERSION=${VERSION:-94.0.4606.81}
> UNGOOGLED=${UNGOOGLED:-94.0.4606.81-1}
444c123
< TAG=${TAG:-alien}
---
> TAG=${TAG:-SLse}
505,512c184,193
< # Build a custom clang or use the system clang?
< # CLANG_MIN is the minimal clang version needed to compile chromium:
< CLANG_MIN=12
< if [ $(clang --version |grep '^clang' |cut -d' ' -f3 |cut -d. -f1) -ge ${CLANG_MIN} ]; then
<   BUILD_CLANG=${BUILD_CLANG:-0}
< else
<   BUILD_CLANG=${BUILD_CLANG:-1}
< fi
---
> # Use custom clang the systems clang version or if you installed the build i made
> # to save time rather than trying to compile googles clang build every time.
> USE_CUSTCLANG=${USE_CUSTCLANG:-1}
> 
> # If set custom clang (USE_CUSTCLANG "1")
> # Make sure you to set correct clang base path.
> # Path where you installed clang, default is set to "/usr" (The system).
> # If you installed my llvm/clang package then set CLANG_BASE_PATH="/opt/llvm".
> #CLANG_BASE_PATH="/opt/llvm"
> CLANG_BASE_PATH="/usr"
535a217,239
> if [ ${USE_CUSTCLANG} -eq 1 ] && [ ! -f "${CLANG_BASE_PATH}/bin/clang" ]; then
>   echo "You have not installed llvm/clang"
>   echo "Build will fail"
>   exit 1
> else
>   CLANG_MIN=13
>   if [ ! $(${CLANG_BASE_PATH}/bin/clang --version |grep '^clang' |cut -d' ' -f3 |cut -d. -f1) -ge ${CLANG_MIN} ]; then
>     echo "Need newer version of llvm/clang"
>     echo "Will proceed in 10 seconds and build internal llvm/clang"
>     echo "If you rather wish to install prebuilt llvm/clang, then abort by pressing Ctrl-C"
>     USE_CUSTCLANG=${USE_CUSTCLANG:-0}
>     sleep 10
>   fi
> fi
> 
> PY_MIN=9
> if [ $(python3 --version | grep '^Python' | cut -d ' ' -f2 | cut -d. -f2) -gt ${PY_MIN} ]; then
>   echo "Build will fail with python 3.10"
>   echo "You need to revert python3 to 3.9.x"
>   exit 1
> fi
> 
> 
546c250
< # browser sync and other functionality which accesses Google APIs. 
---
> # browser sync and other functionality which accesses Google APIs.
590c294,295
<     armv7*)  export ARCH=$MARCH ;;
---
>     armv7*) export ARCH=$MARCH ;;
>     armv6hl) export ARCH=$MARCH ;;
626c331,345
<   armv7*)    SLKCFLAGS="-O2 -march=armv7-a -mfpu=vfpv3-d16 -mfloat-abi=hard"
---
>   armv7*)    SLKCFLAGS="-O2 -march=armv7-a -mtune=cortex-a72 -mfpu=vfpv3-d16 -mfloat-abi=hard"
>              SLKLDFLAGS="-Wl,-z,notext"; LIBDIRSUFFIX=""
>              DSSE="1"
>              # Widevine not supported (no binary library available):
>              # However there are workarounds so why deny this?
>              # Added patch that enables widevine support for armv7
>              #USE_CDM=0
>              # VAAPI not supported:
>              USE_VAAPI=0
>              FFMPEG_ARCH="arm"
>              SYSROOT_ARCH="arm"
>              SYSROOT_TARGET="arm-linux-gnueabihf"
>              PKGARCH="$ARCH"
>              ;;
>   armv6hl)   SLKCFLAGS="-O2 -march=armv6 -mfpu=vfp"
653d371
<     armv7*)  TARGET=$ARCH-slackware-linux-gnueabi ;;
655c373
<     *)       TARGET=$ARCH-slackware-linux ;;
---
>     *)       TARGET=${ARCH}-slackware-linux ;;
761a480,494
> 
> # Latest patchsets for chromium-92.0.4515.x
> # Fixes for building with libstdc++ instead of libc++
> cat $SRCDIR/patches/chromium-90-ruy-include.patch \
>   | patch -p1 --verbose 2>&1 | tee -a $OUTPUT/patch-${PRGNAM}.log
> cat $SRCDIR/patches/chromium-78-protobuf-RepeatedPtrField-export.patch \
>   | patch -p1 --verbose 2>&1 | tee -a $OUTPUT/patch-${PRGNAM}.log
> # Additional patch for chromium-91 (arm64 only)
> cat $SRCDIR/patches/chromium-91-libyuv-aarch64.patch \
>   | patch -p1 --verbose 2>&1 | tee -a $OUTPUT/patch-${PRGNAM}.log
> 
> # Fixes widevine support for arm
> cat $SRCDIR/patches/widevine_support_for_arm.patch \
>   | patch -p1 --verbose 2>&1 | tee -a $OUTPUT/patch-${PRGNAM}.log
> 
815c548
< # ARM platform specifics:
---
> # If ARM, then try to force the build script to build clang for arm instead of x86
817c550
<   # Fix the hard-coded bootstrap target 'X86':
---
>   # We are compiling bootstrap for ARM and not X86.
819,821c552,555
<     -e "s/bootstrap_targets = 'X86'/bootstrap_targets = 'ARM'/"
< 
<   # Compile only the relevant back-ends (ARM, AArch64 and X86):
---
>     -e "s/bootstrap_targets = \x27X86\x27/bootstrap_targets = \x27ARM\x27/"
>   # We are using ARM, so to speed things up we only build the relevant back-ends
>   # (ARM,AArch64 and x86), since it’s very unlikely that we will cross-compile to other arches.
>   # x86 is also needed for Compiler-RT tests.
823c557
<     -e "s/\(^ *targets = \).*$/&1'ARM;X86;AArch64'/"
---
>     -e "s/targets = \x27AArch64;ARM;Mips;PowerPC;SystemZ;WebAssembly;X86\x27/targets = \x27ARM;X86;AArch64\x27/"
860c594,595
< chmod -R u+w,go+r-w,a+X-s .
---
> #chmod -R u+w,go+r-w,a+X-s .
> chmod -R u+w,go+r-w,a+rX-st .
865c600
< [ ${BUILD_CLANG} -eq 1 ] && do_custclang=true || do_custclang=false
---
> [ ${USE_CUSTCLANG} -eq 1 ] && do_clang_plug=false || do_clang_plug=true
872c607
< [ ${FFMPEG_HEVC} -eq 1 ] && do_hevc=true || do_hevc=false 
---
> [ ${FFMPEG_HEVC} -eq 1 ] && do_hevc=true || do_hevc=false
890d624
<     'enable_webrtc=true'
893a628
>     "clang_use_chrome_plugins=${do_clang_plug}"
894a630
>     'is_official_build=true'
898,901d633
<     "linux_sandbox_path=\"/usr/lib${LIBDIRSUFFIX}/${PRGNAM}/chrome_sandbox\""
<     #'linux_strip_binary=true'
<     'linux_use_bundled_binutils=false'
<     "ozone_platform_wayland=${do_wayland}"
904c636,637
<     #'rtc_pipewire_version="0.3"' # Otherwise chromium tries to link absent 0.2 
---
>     #'rtc_pipewire_version="0.3"' # Otherwise chromium tries to link absent 0.2
>     "ozone_platform_wayland=${do_wayland}"
906d638
<     'remove_webcore_debug_symbols=true'
909d640
<     "usb_ids_path=\"/usr/share/hwdata/usb.ids\""
915d645
<     'use_gconf=false'
926,927c656,658
< if [ ${USE_CLANG} -eq 1 ] && [  ${BUILD_CLANG} -eq 0 ]; then
<   # Use system toolchain:
---
> 
> # Set base path custom clang
> if [ ${USE_CUSTCLANG} -eq 1 ]; then
929,930c660,674
<     'custom_toolchain="//build/toolchain/linux/unbundle:default"'
<     'host_toolchain="//build/toolchain/linux/unbundle:default"'
---
>     'clang_use_default_sample_profile=false'
>     "clang_base_path=\"${CLANG_BASE_PATH}\""
>   )
> fi
> 
> if [[ ! "$ARCH" =~ arm.* ]]; then
>   _chromium_conf+=(
>     'enable_hidpi=true'
>     'enable_webrtc=true'
>     "linux_sandbox_path=\"/usr/lib${LIBDIRSUFFIX}/${PRGNAM}/chrome_sandbox\""
>     #'linux_strip_binary=true'
>     'linux_use_bundled_binutils=false'
>     'remove_webcore_debug_symbols=true'
>     "usb_ids_path=\"/usr/share/hwdata/usb.ids\""
>     'use_gconf=false'
932a677
> 
937c682,688
<   # Add remainder of standard chromium flags:
---
>   if [[ ! "$ARCH" =~ arm.* ]]; then
>     # Add remainder of standard chromium flags:
>     _chromium_conf+=(
>         "enable_hotwording=${do_hotword}"
>         'enable_pepper_cdms=true'
>     )
>   fi
939,949c690,696
<     "clang_use_chrome_plugins=${do_custclang}"
<     'enable_hangout_services_extension=true'
<     "enable_hotwording=${do_hotword}"
<     'enable_js_type_check=true'
<     'enable_nacl=false'
<     'enable_nacl_nonsfi=false'
<     'enable_pepper_cdms=true'
<     "enable_widevine=${do_cdm}"
<     'exclude_unwind_tables=true'
<     'fieldtrial_testing_like_official_build=true'
<     'logging_like_official_build=true'
---
>       'enable_hangout_services_extension=true'
>       'enable_js_type_check=true'
>       'enable_nacl=false'
>       'enable_nacl_nonsfi=false'
>       "enable_widevine=${do_cdm}"
>       'exclude_unwind_tables=true'
>       'fieldtrial_testing_like_official_build=true'
951a699
> 
1067,1070c815,816
<   # from the debian sysroot image:
<   if [ ! -f build/linux/${SYSROOTDIR}/usr/bin/${SYSROOT_TARGET}-readelf ]; then
<     ln -s /usr/bin/readelf \
<       build/linux/${SYSROOTDIR}/usr/bin/${SYSROOT_TARGET}-readelf
---
>   if [ ! -f /usr/bin/${SYSROOT_TARGET}-readelf ]; then
>     ln -s /usr/bin/readelf /usr/bin/${SYSROOT_TARGET}-readelf
1088c834
< if [ ${USE_CLANG} -eq 1 ] && [  ${BUILD_CLANG} -eq 1 ]; then
---
> if [ ${USE_CLANG} -eq 1 ] && [ ${USE_CUSTCLANG} -eq 0 ]; then
1091,1104d836
<   HDR2REM=""
<   if [ "$ARCH" == "i586" ]; then
<     # Actually 32bit compilation fails by not finding 'bits/c++config.h'.
<     # I could only work around this using a kludge:
<     # cp -ia /usr/include/c++/$(gcc -dumpversion)/${TARGET}/bits/* /usr/include/c++/$(gcc -dumpversion)/bits/
<     # Keep a list of the symlinks we'll be creating:
<     for HDR in /usr/include/c++/$(gcc -dumpversion)/${TARGET}/bits/*.h ; do
<       if [ ! -f /usr/include/c++/$(gcc -dumpversion)/bits/$(basename $HDR) ];
<     then
<       ln -s $HDR /usr/include/c++/$(gcc -dumpversion)/bits/
<       HDR2REM="$(basename $HDR) $HDR2REM"
<       fi
<     done
<   fi
1119c851,855
<   export PATH="$MYCLANG_PATH:$PATH"
---
>   export PATH="${MYCLANG_PATH}:$PATH"
> elif [ ${USE_CLANG} -eq 1 ] && [ ${USE_CUSTCLANG} -eq 1 ]; then
>   # Ensure correct path for custom clang version:
>   MYCLANG_PATH="${CLANG_BASE_PATH}/bin"
>   export PATH="${MYCLANG_PATH}:$PATH"
1140c876
<     ## "clang-5.0: error: invalid linker name in argument '-fuse-ld=lld'" 
---
>     ## "clang-5.0: error: invalid linker name in argument '-fuse-ld=lld'"
1159,1161c895,899
< if [ ${USE_CLANG} -eq 1 ] && [  ${BUILD_CLANG} -eq 1 ]; then
<   # Symlink ld to lld to make gn linking stage succeed:
<   cd $MYCLANG_PATH ; ln -s lld ld ; cd - 1>/dev/null
---
> # Symlink ld to lld to make gn linking stage succeed:
> if [ "$USE_CLANG" -eq 1 ] && [ ! "$MYCLANG_PATH" = "/usr/bin" ]; then
>   if [ ! -f ${MYCLANG_PATH}/ld ]; then
>     cd ${MYCLANG_PATH} ; ln -s lld ld ; cd - 1>/dev/null
>   fi
1168,1176c906,909
< if [ ${USE_CLANG} -eq 1 ] && [  ${BUILD_CLANG} -eq 1 ]; then
<   # Remove symlink again:
<   rm $MYCLANG_PATH/ld
< fi
< 
< if [ ${USE_CLANG} -eq 1 ] && [  ${BUILD_CLANG} -eq 1 ]; then
<   if [ -n "$HDR2REM" ]; then
<     # Remove the temporary header symlinks we created earlier:
<     ( cd /usr/include/c++/$(gcc -dumpversion)/bits/ && rm $HDR2REM)
---
> # Remove symlink again:
> if [ "$USE_CLANG" -eq 1 ] && [ ! "$MYCLANG_PATH" = "/usr/bin" ]; then
>   if  [ -f ${MYCLANG_PATH}/ld ]; then
>     rm ${MYCLANG_PATH}/ld
1187c920
< if [ ${USE_CLANG} -eq 1 ] && [ ${BUILD_CLANG} -eq 1 ]; then
---
> if [ "$USE_CLANG" -eq 1 ] && [ ! "$MYCLANG_PATH" = "/usr/bin" ]; then
1192,1197c925,926
< elif [ "$USE_CLANG" = "0" ]; then
<   # Be careful not to override CC and CXX (may have been set by gcc5):
<   export CC=${CC:-"gcc"}
<   export CXX=${CXX:-"g++"}
< else
<   # Use the system clang:
---
> elif [ "$USE_CLANG" -eq 1 ] && [ "$MYCLANG_PATH" = "/usr/bin" ]; then
>   # Use the clang that we build in-tree instead of using the system version:
1200a930,933
> else
>   # Be careful not to override CC and CXX (may have been set by gcc5):
>   export CC=${CC:-"gcc"}
>   export CXX=${CXX:-"g++"}
1326a1060,1066
> 
> # Fix user-agent for ARM
> if [[ "$ARCH" =~ arm.* ]]; then
>   sed -i out/Release/${PRGNAM}.desktop \
>     -e "s/\/${PRGNAM}/\/${PRGNAM} \-\-user-agent=\"Mozilla\/5.0 \(X11; CrOS armv7l 10895.56.0\) AppleWebKit\/537.36 \(KHTML, like Gecko\) Chrome\/${VERSION} Safari\/537.36\"/"
> fi
> 
1467a1208,1212
> 
> # Cleanup
> if [ -f /usr/bin/${SYSROOT_TARGET}-readelf ]; then
>   rm /usr/bin/${SYSROOT_TARGET}-readelf
> fi
